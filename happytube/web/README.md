# HappyTube Web Player

A simple, controlled web player for curated YouTube videos from HappyTube.

## Two Modes

1. **Development Mode** (Flask): Run locally with `poetry run python -m happytube.web.server`
2. **Static Mode** (Deployment): Deploy to GitHub Pages, Netlify, or any static host

## Features

- **Controlled Playback**: YouTube embed with disabled recommendations and related videos
- **Curated Playlist**: Only shows videos from your HappyTube collection
- **Search**: Filter videos by title, description, or channel
- **Keyboard Navigation**: Arrow keys or n/p to navigate between videos
- **Auto-play**: Optional auto-play next video when current ends
- **Fullscreen**: Fullscreen support while blocking unwanted YouTube navigation
- **Static Deployment**: No backend required - deploy to GitHub Pages for free

## YouTube Embed Restrictions

The player uses the YouTube IFrame API with the following restrictions to prevent access to unsanctioned content:

- `rel=0` - No related videos from other channels
- `modestbranding=1` - Minimal YouTube branding
- `iv_load_policy=3` - No annotations
- `disablekb=1` - Disabled keyboard controls that could navigate to YouTube
- `showinfo=0` - No video information overlay

## Quick Start

### Development Mode (Flask)

```bash
# 1. Fetch and rate videos
poetry run python -m happytube.main

# 2. Start development server
poetry run python -m happytube.web.server

# 3. Open http://127.0.0.1:5000
```

### Static Deployment (GitHub Pages)

```bash
# 1. Fetch and rate videos
poetry run python -m happytube.main

# 2. Export to static JSON
poetry run python -m happytube.web.export

# 3. Deploy the static/ folder to GitHub Pages
# See DEPLOYMENT.md for detailed instructions
```

## Deployment

For detailed deployment instructions including:
- GitHub Pages setup
- Netlify/Vercel deployment
- GitHub Actions automation
- Custom domains

See **[DEPLOYMENT.md](DEPLOYMENT.md)**

## Development API Endpoints

When running in Flask mode:

- `GET /` - Main player interface
- `GET /api/videos` - Get all videos as JSON
- `GET /api/videos/<video_id>` - Get specific video details

In static mode, the player loads from `videos.json` directly.

## Project Structure

```
happytube/web/
├── server.py           # Flask backend (development mode)
├── export.py           # Export script for static deployment
├── templates/
│   └── player.html     # Flask template
├── static/
│   ├── index.html      # Static version for deployment
│   ├── player.js       # Player logic (works in both modes)
│   ├── styles.css      # Styling
│   └── videos.json     # Generated by export.py
├── README.md           # This file
└── DEPLOYMENT.md       # Deployment guide
```

## Future Enhancements

Potential improvements:

- User preferences and watch history
- Playlist management (create custom playlists)
- Video ratings and feedback
- Integration with happiness scores in the UI
- Mobile app version
- PWA support for offline viewing
